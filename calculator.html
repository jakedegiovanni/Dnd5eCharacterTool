<!Doctype html>
<html>
    <head>
         <meta charset="UTF-8">
        <title>Ability Calculator</title>

        <style>
            td {
                width: 50%;
                max-width: 50%;
                padding-top: 3%;
                padding-bottom: 3%;
                text-align: center;
            }

            select {
                margin-left: 3%;
                margin-top: 3%;
                margin-bottom: 1.5%;
            }

            body {
                background-color: #f5f5dc;
            }

            .noButton {
                width: 100%;
            }

            .classInfo {
                width: 25%;
                height: 25%;
            }
        </style>

        <script src="d3/d3.min.js" charset="utf-8"></script>
    </head>
    <body>
        <h1 align="center" style="padding-bottom: 3%; font-family: Verdana;">Dungeons and Dragons Player Planner</h1>
        <div>
            <table style="float: left; width: 30%">
                <tr>
                    <td colspan="2">
                        <select id="race" onchange="populateTableRace()">
                            <option value="norace">Please Select a Race</option>
                            <option value="hilldwarf">Hill Dwarf</option>
                            <option value="mountaindwarf">Mountain Dwarf</option>
                            <option value="highelf">High-Elf</option>
                            <option value="woodelf">Wood-Elf</option>
                            <option value="darkelf">Dark-Elf/Drow</option>
                            <option value="lightfoot">Lightfoot-Halfling</option>
                            <option value="stout">Stout-Halfling</option>
                            <option value="human">Human</option>
                            <option value="dragonborn">Dragonborn</option>
                            <option value="forestgnome">Forest-Gnome</option>
                            <option value="rockgnome">Rock-Gnome</option>
                            <option value="halfelf">Half-Elf</option>
                            <option value="halforc">Half-Orc</option>
                            <option value="tiefling">Tiefling</option>
                        </select>
                    </td>
                </tr>

                <tr>
                    <th>Strength</th>
                    <td>
                        <input id="strength" name="screen" value="0">
                        <button type="button" onclick="add('strength')">+</button>
                    </td>
                </tr>

                <tr>
                    <th>Dexterity</th>
                    <td>
                        <input id="dexterity" name="screen" value="0">
                        <button type="button" onclick="add('dexterity')">+</button>
                    </td>
                </tr>

                <tr>
                    <th>Constitution</th>
                    <td>
                        <input id="constitution" name="screen" value="0">
                        <button type="button" onclick="add('constitution')">+</button>
                    </td>
                </tr>

                <tr>
                    <th>Intelligence</th>
                    <td>
                        <input id="intelligence" name="screen" value="0">
                        <button type="button" onclick="add('intelligence')">+</button>
                    </td>
                </tr>

                <tr>
                    <th>Wisdom</th>
                    <td>
                        <input id="wisdom" name="screen" value="0">
                        <button type="button" onclick="add('wisdom')">+</button>
                    </td>
                </tr>

                <tr>
                    <th>Charisma</th>
                    <td>
                        <input id="charisma" name="screen" value="0">
                        <button type="button" onclick="add('charisma')">+</button>
                    </td>
                </tr>

                <tr>
                    <th>Remaining</th>
                    <td>
                        <input id="remaining" name="screen" value="0" class="noButton">
                    </td>
                </tr>

                <tr>
                    <td colspan="2"><button type="button" onclick="resetRace()">Reset</button></td>
                </tr>
            </table>

            <img src="classes/classes.png" alt="class descriptions image" height="800" width="1500" style="float: right">
        </div>

        <script src="classes/barbarian.js"></script>

        <script language="javascript">
            function add(target) {
                var prev = document.getElementById(target).value;
                prev = parseInt(prev);

                if (parseInt(document.getElementById('remaining').value) > 0) {
                    document.getElementById(target).value = prev + 1;
                    document.getElementById('remaining').value = parseInt(document.getElementById('remaining').value) - 1;
                }
            }

            function minus(target) {
                var prev = document.getElementById(target).value;
                if (parseInt(prev) > 0)
                    document.getElementById(target).value = parseInt(prev) - 1;
            }

            function resetRace() {
                populateTableRace();
            }

            function populateTableRace() {
                var name = document.getElementById("race").value;
                var file = "races/" + name + ".csv";
                var dataset = " ";
                var array = [];

                d3.csv(file, function(data) {
                //  console.log(data[0]);
                  dataset = JSON.stringify(data[0]);
                  array = dataset.split(",");

                  var i;
                  for (i = 0; i<array.length; i++) {
                      array[i] = array[i].split(":");
                  }

                  document.getElementById('strength').value = parseInt(array[0][1][1]);
                  document.getElementById('dexterity').value = parseInt(array[1][1][1]);
                  document.getElementById('constitution').value = parseInt(array[2][1][1]);
                  document.getElementById('intelligence').value = parseInt(array[3][1][1]);
                  document.getElementById('wisdom').value = parseInt(array[4][1][1]);
                  document.getElementById('charisma').value = parseInt(array[5][1][1]);
                  document.getElementById('remaining').value = parseInt(array[6][1][1]);
                });
            }
        </script>
    </body>
</html>
